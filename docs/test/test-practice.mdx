---
id: test-practice
title: 实践落地
---

<script src="https://cdn.bootcdn.net/ajax/libs/ityped/1.0.3/index.min.js"></script>



## 前言

单测是保证项目质量的手段,而不是目的。




单测覆盖率为应用质量指标化提供解决方案。


一口吃不了一个胖子, 由于每个人的认识不一样,要想达到理想的状态,显然是不可能的。





## 一、目标

### 1.1 质量保障

**软件的质量不是测试出来的，而是设计和维护出来的。**

通过 `mvn test` 在每次编译时候，对代码进行测试。已到达可持续集成的目的。

### 1.2 打扫屋子

大多数项目目前的编译脚本都是,跳过单元测试的. `mvn -Dmaven.test.skip=true`, 之所以这样是
因为大多数的单测都是为 `debug` 写的,一旦在编译的时候执行单测用例, 就会编译不通过。所以要想达到
可持续集成的目的, 就要先把阻塞应用的单元测试用例给移除。

我们可以通过 `@Ignore` 来。

### 1.3 发挥价值

不要跳过单测

## 二、单测技术搭建

### 2.1 启动类检查

### 2.2 依赖检查

### 2.3 中心思想

#### 2.3.1 基础层测试

基础层包括,工具层 + DAL内部数据 + Integration外部数据

这一部分不能使用mock进行验证,因为要验证代码执行是否通过和外部接口是否正常。

但是为了不影响mvn test执行。所以注意要使用 `@Ignore` 修饰。
另外为了防止脏数据, 所以要注意数据隔离。检查下启动类是否声明了事务

#### 2.3.2 业务层

业务层包括, Service层 + Domain层

一般情况Service的测试一定会覆盖到Domain层,但是也允许单独对Domain层进行单元测试。
最小粒度的测试代码单元。


Mockito + JMackData + JUnit。 注意不要用 `@Ignore` 修饰,这部分代码是要求
`mvn test` 来执行的。
